{"ast":null,"code":"var _jsxFileName = \"/Users/jphubert/Flatiron/module_4/practice/hackathon-80s/frontend/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react';\nimport Header from './containers/Header';\nimport Main from './containers/Main';\nimport Footer from './containers/Footer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      apiKey: \"c3238609982efde4e01b99b0caeeb18a\",\n      albums: [],\n      favorites: [],\n      showFavorites: true\n    };\n\n    this.toggleFavorites = () => {\n      console.log(this.state.favorites);\n      this.setState({\n        showFavorites: !this.state.showFavorites\n      });\n    };\n\n    this.addToFavorites = favorite => {\n      const favoriteAlbum = this.state.favorites.find(fav => fav === favorite);\n\n      if (!favoriteAlbum) {\n        this.setState({\n          favorites: [...this.state.favorites, favorite]\n        });\n      }\n\n      fetch(\"http://localhost:3000/albums\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          album_name: favorite.name,\n          artist_name: favorite.artist.name,\n          cover_image: favorite.image[3][\"#text\"]\n        })\n      });\n    };\n\n    this.removeFromFavorites = favorite => {\n      const newFavorites = this.state.favorites.filter(fav => fav !== favorite);\n      this.setState({\n        favorites: newFavorites\n      });\n      fetch(`http://localhost:3000/albums/${favorite.id}`, {\n        method: \"DESTROY\"\n      });\n    };\n\n    this.searchArtist = event => {\n      event.preventDefault();\n      const artist = event.target.artist.value;\n      fetch(`http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=${artist}&api_key=${this.state.apiKey}&format=json`).then(response => response.json()).then(topAlbums => {\n        this.setState({\n          albums: topAlbums.topalbums.album\n        });\n      });\n      this.setState({\n        name: ''\n      });\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/albums`).then(response => response.json()).then(favorites => this.setState({\n      favorites\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Main, {\n        searchArtist: this.searchArtist,\n        toggle: this.toggleFavorites,\n        albums: this.state.albums,\n        favorites: this.state.favorites,\n        showFavorites: this.state.showFavorites,\n        add: this.addToFavorites,\n        remove: this.removeFromFavorites\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jphubert/Flatiron/module_4/practice/hackathon-80s/frontend/src/App.js"],"names":["React","Component","Header","Main","Footer","App","state","apiKey","albums","favorites","showFavorites","toggleFavorites","console","log","setState","addToFavorites","favorite","favoriteAlbum","find","fav","fetch","method","headers","Accept","body","JSON","stringify","album_name","name","artist_name","artist","cover_image","image","removeFromFavorites","newFavorites","filter","id","searchArtist","event","preventDefault","target","value","then","response","json","topAlbums","topalbums","album","componentDidMount","render"],"mappings":"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","sourcesContent":["import './App.css';\n\nimport React, { Component } from 'react';\nimport Header from './containers/Header';\nimport Main from './containers/Main';\nimport Footer from './containers/Footer';\n\nclass App extends Component {\n\n  \n  // artist = \"cher\"\n\n  // Artist Search\n\n  // Album Search\n  // http://ws.audioscrobbler.com/2.0/?method=album.getinfo&api_key=${this.apiKey}&artist=${this.artist}&album=${this.album}&format=json\n\n  state = {\n    apiKey: \"c3238609982efde4e01b99b0caeeb18a\",\n    albums: [],\n    favorites: [],\n    showFavorites: true\n  }\n\n  componentDidMount(){\n    fetch(`http://localhost:3000/albums`)\n      .then( response => response.json() )\n      .then( favorites => this.setState({ favorites }) )\n  }\n\n  toggleFavorites = () => {\n    console.log(this.state.favorites)\n    this.setState({ showFavorites: !this.state.showFavorites })\n  }\n\n  addToFavorites = favorite => {\n    const favoriteAlbum = this.state.favorites.find( fav => fav === favorite )\n\n    if (!favoriteAlbum){\n      this.setState({ favorites: [...this.state.favorites, favorite]}) \n    }\n\n    fetch(\"http://localhost:3000/albums\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\" : \"application/json\"\n      },\n      body: JSON.stringify({\n        album_name: favorite.name,\n        artist_name: favorite.artist.name,\n        cover_image: favorite.image[3][\"#text\"]\n      })\n    })\n  }\n\n  removeFromFavorites = favorite => {\n    const newFavorites = this.state.favorites.filter( fav => fav !== favorite )\n\n    this.setState({ favorites: newFavorites })\n\n    fetch(`http://localhost:3000/albums/${favorite.id}`, {\n      method: \"DESTROY\",\n    })\n  }\n\n  searchArtist = event => {\n    event.preventDefault()\n\n    const artist = event.target.artist.value\n  \n    fetch(`http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist=${artist}&api_key=${this.state.apiKey}&format=json`)\n        .then( response => response.json() )\n        .then( topAlbums => {\n          this.setState({ albums: topAlbums.topalbums.album})\n        })\n    \n    this.setState({name: ''})\n  }\n\n  render() {\n    return (\n      <div>\n        <Header />\n        <Main\n          searchArtist={this.searchArtist}\n          toggle={this.toggleFavorites}\n          albums={this.state.albums}\n          favorites={this.state.favorites}\n          showFavorites={this.state.showFavorites}\n          add={this.addToFavorites}\n          remove={this.removeFromFavorites}\n        />\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}